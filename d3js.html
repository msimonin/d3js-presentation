<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>D3.js</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" id="theme">
    <link rel="stylesheet" href="lib/revealjs/css/reveal.min.css">
    <link rel="stylesheet" href="lib/revealjs/css/theme/beige.css" id="theme">
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/revealjs/lib/css/zenburn.css">
    <link rel="stylesheet" href="css/dc.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->

    <script>
      document.write( '<link rel="stylesheet" href="lib/revealjs/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>
    <script src="lib/d3/d3.min.js"></script>
    <script src="lib/crossfilter.js"></script>
    <script src="lib/dc.js"></script>
    <script src="lib/nvd3/nv.d3.js"></script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <
    ![endif]-->
    <style>
      .reveal .slides{
        text-align: left;
      }

      .reveal h2{
        margin-bottom: 50px;
      }
      rect {
        pointer-events: all;
      }


      .cursor {
        fill: none;
        stroke: brown;
        pointer-events: none;
      }

      .link {
        stroke: #999;
      }

      .node {
        z-index:1;
      }
      #title {
      }

      #pie {
        width: 300px;
        height:300px;
        float:left;
      }
      #graph {
        width: 300px;
        height:300px;
        float:left;
      }
      #bar {
        width:300px;
        height:300px;
        float:left;
      }
      .raw {
        width:100%;
      }
      #rawtext {
        font-size: 75%;
      }

      .discreteBar {
        fill: "black"
      }
      .nv-y text{
        display: none;
      }

      .x-axis-label {
        font-size: 15px;
      }
      .y-axis-label {
        font-size: 15px;
      }
    </style>
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
        <h1>D3.js : the basics</h1>
        <h4>Matthieu Simonin</h4>
        <br/>
        <br/>
        <a href="https://github.com/msimonin/d3js-presentation">https://github.com/msimonin/d3js-presentation</a>
        </section>

        <section>
        <section>
        <h1>1. First steps</h1>
        </section>
                <section>
        <h2>Minimal setup : how to d3 ?</h2>
        <div>
          <ul>
            <li><a href="http://jsfiddle.net/">http://jsfiddle.net/</a></li>
            <li><a href="http://jsbin.com/">http://jsbin.com/</a></li>
            <li>Offline with your favorite editor/browser</li>
            <li>Offline with your favorite editor/browser and a local web server</li>
          </ul>
        </div>
        <br/>
        <div>
          <p>
          Official wiki : <a href="https://github.com/mbostock/d3/wiki">https://github.com/mbostock/d3/wiki</a>
          </p>
        </div>
        </section>
<section>
        <h2>Setup</h2>

        <pre><code>➤ tree
.
├── index.html
└── javascript
    ├── d3.js
    └── d3.min.js

➤ cat index.html

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;D3js&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;javascript/d3.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
      // Javascript and D3js code here
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
  </code></pre>

        Get <strong>d3.js</strong> : <a href="https://github.com/mbostock/d3/releases">https://github.com/mbostock/d3/releases</a>
        </section>



        <section>
        <h2>D3.js from the browser console</h2>
        <h3>DOM manipulations</h3>

        key functions :
        <pre><code>
          selection  : d3.select('{selector}') / d3.selectAll('{selector}')
          insertion  : {selection}.append('tag')
          attribute  : {selection}.attr("attr", value)
          style      : {selection}.style("key", "value")
          removal    : {selection}.remove()
        </pre></code>

        <aside class="notes">
        <small>
          <pre><code>
d3.select('body')
var div = d3.select('body').append('div');
div.text("hello div")
d3.select('body').append('div').attr('id', 'div1').style('border', '1px solid red').text('je suis un div entouré');
d3.selectAll('div').remove();
d3.select('body').append('div').attr("class", "maclasse");
d3.select('body').append('div').attr("id", "myid");
d3.selectAll('.maclasse');
d3.selectAll('#id)');
d3.select("body").append("div").text("hello").style("font", "4px arial").transition().duration(1000).style("font", "50px arial");

          </code></pre>
        </small>
        </aside>
        </section>

        <section>
          <h2>Tuto 1 : DOM manipulations</h2>
        </section>

        <section>
        <h2>D3.js from the browser console</h2>
        <h3>SVG manipulations</h3>

        <p>
        Same as before but with svg elements.
        </p>

        <p>
        <a href="http://www.w3.org/TR/SVG/shapes.html">Basic shapes</a>
        </p>
        <div>
          <svg height='110px'>
          <circle cx="50" cy="50" r="10" stroke="black" stroke-width="3" fill="red" opacity="0.1" />
          <circle cx="100" cy="50" r="20" stroke="black" stroke-width="3" fill="red" opacity="0.5" />
          <circle cx="160" cy="50" r="25" stroke="black" stroke-width="3" fill="red" opacity="0.7" />
          <circle cx="200" cy="50" r="40" stroke="black" stroke-width="3" fill="red" opacity="1"/>
          <rect x="350" y="30" width="20" height="20" style="fill:blue;stroke:pink;stroke-width:1;opacity:0.1" />
          <rect x="400" y="50" width="50" height="75" style="fill:blue;stroke:pink;stroke-width:1;opacity:0.5" />
          <rect x="450" y="0" width="100" height="100" style="fill:blue;stroke:pink;stroke-width:1;opacity:1" />
          <line x1="600" y1="10" x2="650" y2="50" style="stroke:rgb(255,0,0);stroke-width:2" />
          <line x1="600" y1="100" x2="800" y2="50" style="stroke:rgb(255,120,50);stroke-width:5" />
          </svg>
        </div>
        <pre><code>&lt;svg height=500px width=500px&gt;
  &lt;circle cx="100" cy="50" r="20" stroke="black" stroke-width="3" fill="red" opacity="0.5" &gt;
  &lt;rect x="450" y="0" width="100" height="100" style="fill:blue;stroke:pink;stroke-width:1;opacity:1" /&gt;
  &lt;line x1="600" y1="100" x2="800" y2="50" style="stroke:rgb(255,120,50);stroke-width:5" /&gt;
&lt;/svg&gt;
            </code></pre>

        <aside class="notes">
        <small>
          <pre><code>
        add a svg tag
        add circles
        position
        radius
        </pre></code>
        </small>
        </aside>
        </section>

        <section id="slide-transition">
        <h2> Transitions</h2>
        <div class="container">
          <svg height='110px'></svg>
          <script src="lib/slides/slide-transition.js"></script>
        </div>
        <br/>
        <h5>Example</h5>
        <pre><code>
d3.select('circle')
  .attr("r", "10px")
  .transition()
  .attr("r", "20px");
          </code></pre>
        will interpolate the radius from 10px to 20px in 250ms.


        </section>
        </section><!-- First steps -->

        <section>
        <section>
        <h1> 2. Loading datas</h1>
        </section>

        <section>
          <h2>Load datas in memory</h2>

          <ul>
            <li>Hard coded :</li>
             <pre><code>
var data = [1,2,3];
  // create visualization
             </code></pre>
            <li>Through asynchronous HTTP request : </li>
             <pre style="width:100%"><code style="width:100%">
d3.json("path/to/file.json", function(error, json) {
  if (error) return console.warn(error);
  data = json;
  // create visualization
});
             </code></pre>
            </ul>
            </section>

            <section>

            <h2>Tuto 2 : loading datas</h2>

            Load datas from a local web server
            <pre><code>tutos ➤ python -m SimpleHTTPServer
Serving HTTP on 0.0.0.0 port 8000 ...
           </code></pre>
            <ul>
              <li>then edit <code>tutos2/index.html</code> and load <code>datas/villes_france.csv</code></li>
              <li>see  <a href="https://github.com/mbostock/d3/wiki/Arrays">https://github.com/mbostock/d3/wiki/Arrays</a>
              <li>compute the population of France in 2010.</li>
              <li>filter the 25 most populated cities in France</li>
              <ul>
                </p>

                </section>

                </section>  <!-- Loading datas -->


                <section>
                <section>
                <h1>3. Binding datas</h1>
                <h2> Part 1. The update selection</h2>
                </section>

                <section>
                <div class="container">

                  <div class=row"">
                    <div class=col-md-6>
                      <pre><code>
&lt;div class=&quot;container&quot;&gt;
  &lt;div&gt;&lt;/div&gt;
  &lt;div&gt;&lt;/div&gt;
  &lt;div&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
var myDatas = [1,2,3];
var container = d3.select('.container');
container.selectAll(&quot;div&quot;)
  .data(myDatas);
&lt;/script&gt;
        </code></pre>
                    </div>

                    <div class=col-md-6>
                      <img src="images/binding.png" style="border:none"/>
                      <small>datas are bound through the __data__ property.</small>
                    </div>

                  </div>
                  </section>

                  <section id="slide-using-datas">
                  <h2>Using your datas : overview</h2>
                  <div class="container">

                    <svg height="250px">
                    <circle cx="40" cy="150" r="10" stroke="black" stroke-width="1" fill="red" opacity="1" />
                    <circle cx="190" cy="150" r="10" stroke="black" stroke-width="1" fill="red" opacity="1" />
                    <circle cx="340" cy="150" r="10" stroke="black" stroke-width="1" fill="red" opacity="1" />
                    <circle cx="490" cy="150" r="10" stroke="black" stroke-width="1" fill="red" opacity="1" />
                    <circle cx="630" cy="150" r="10" stroke="black" stroke-width="1" fill="red" opacity="1" />
                    <text x="10" y="50"></text>
                    <text x="90" y="50"></text>
                    <text x="170" y="50"></text>
                    <text x="250" y="50"></text>
                    <text x="330" y="50"></text>
                    </svg>
                  </div>
                  <script src="lib/slides/slide-using-datas.js"></script>
                  </section>

                  <section>
                  <h2>Using your datas : how to</h2>
                  <div class="row">
                    <div class="col-md-8">
                      <pre><code>
&lt;div class=&quot;container&quot;&gt;
  &lt;div&gt;&lt;/div&gt;
  &lt;div&gt;&lt;/div&gt;
  &lt;div&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
var myDatas = [1,2,3];
var container = d3.select('container');
container.selectAll(&quot;div&quot;)
  .data(myDatas)
  .text(function(d, i) {
    return i + ',' + d;
  });
&lt;/script&gt;
        </code></pre>
                    </div>
                    <div class="col-md-4">
                      <img src="images/binding2.png" style="border:none">
                    </div>
                  </div>
                  </section>

                  <section>
                  <h1>3. Binding datas</h1>
                  <h2> Part 2. The enter selection</h2>
                  </section>

                  <section id="slide-extra-datas">
                  <h2> Binding extra data elements : overview </h2>
                  <div class="container">
                    <svg height="250px">
                    <circle cx="40" cy="150" r="10" stroke="black" stroke-width="1" fill="red" opacity="1" />
                    <circle cx="190" cy="150" r="10" stroke="black" stroke-width="1" fill="red" opacity="1" />
                    <circle cx="340" cy="150" r="10" stroke="black" stroke-width="1" fill="red" opacity="1" />
                    <text x="10" y="50"></text>
                    <text x="90" y="50"></text>
                    <text x="170" y="50"></text>
                    <text x="250" y="50"></text>
                    <text x="330" y="50"></text>
                    </svg>
                  </div>
                  <script src="lib/slides/slide-extra-datas.js"></script>
                  </section>

                  <section>
                  <h2>Binding extra data elements : how to </h2>

                  <pre><code>
&lt;div class=&quot;container&quot;&gt;
  &lt;div&gt;&lt;/div&gt;
  &lt;div&gt;&lt;/div&gt;
  &lt;div&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
var myDatas = [1,2,3,4,5];
var container = d3.select(".container");
var updateSel = container.selectAll(&quot;div&quot;)
.data(myDatas);

//update existing div
updateSel.text(function(d, i) {
  return i + ',' + d;
});

// add new divs
var newElements = updateSel.enter()
  .append(&quot;div&quot;)
  .text(function(d,i) {
    return i + ',' + d;
  });

&lt;/script&gt;
</code></pre>


                  </section>

                  <section>
                  <h1>3. Binding datas</h1>
                  <h2> Part 2 (bis). Binding from scratch</h2>
                  </section>
                  <section id="slide-binding-from-scratch">
                  <h2>Binding from scratch : overview</h2>
                  <div class="container">
                    <svg height="250px">
                    </svg>
                  </div>
                  <script src="lib/slides/slide-binding-from-scratch.js"></script>
                  </section>

                  <section>
                  <h2>Binding from scratch : how to</h2>
                  <div class="row">
                    <div class="col-md-8">
                      <pre><code>
&lt;div class=&quot;container&quot;&gt;
&lt;/div&gt;

&lt;script&gt;
var myDatas = [1,2,3];
var container = d3.select(".container");
container.selectAll(&quot;div&quot;)
  .data(myDatas)
  .enter()
  .append(&quot;div&quot;)
  .text(function(d,i) {
    return i + ',' + d;
  });

&lt;/script&gt;
</code></pre>
                    </div>
                    <div class="col-md-4">
                      <img src="images/binding2.png" style="border:none">
                    </div>
                  </div>
                  </section>

                  <section>
                  <h1>3. Binding datas</h1>
                  <h2>Sum up</h2>

            <pre><code>{selection}.data(myDatas)</code></pre>

                  Returns the <b>update</b> selection.

            <pre><code>{selection}.data(myData).enter()</code></pre>
                  Returns the <b>enter</b> selection : placeholders for missing elements
                  </section>

                  <section>
                  <h2>Tuto 3 : creating a bar chart (1)</h2>
                  <p>Bind each city of the tuto2 to a svg rect :</p>
                  <img src="images/barchart1.png" style="border:0" />

                  svg rect : <a href="http://www.w3.org/TR/SVG/shapes.html#RectElement">http://www.w3.org/TR/SVG/shapes.html#RectElement</a>

                  </section>
                  </section>

                  <section>
                  <section>
                  <h1>4. Scales</h1>
                  </section>

                  <section>
                  <p>
                  From the <a href="https://github.com/mbostock/d3/wiki/Quantitative-Scales">wiki</a> : 
                  </p>
                  <p>
                  <q>Scales are functions that map from an input domain to an output range</q>
                  </p>
                  <br/>

                  <h4>Basic examples : </h4>
                  <pre><code>
var linScale = d3.scale.linear().domain([0,1]).range([0,500]);
linScale(0.5); // return 250
var logScale = d3.scale.log().domain([1, Math.pow(10,6)]);
logScale(Math.pow(10,4)); // return 4
              </code></pre>

                  </section>

                  <section>
                  <h2>Tuto4 : creating a bar chart (2)</h2>
                  <p>Map the population in 2010 to the height of the rect:</p>
                  <img src="images/barchart2.png" style="border:0" height=500px/> 
                  </section>

                  </section>

                  <section>
                  <section>
                  <h1>5. Axis</h1>

                  </section>

                  <section>
                  <p>
                  For a given scale, the d3 axis component generate all the svg elements needed to draw the axis (a line, ticks, numbers ...). (see <a href="https://github.com/mbostock/d3/wiki/SVG-Axes">wiki</a>).</p>
                  <br/>
                  <h4>Basic example</h4>
                  <pre><code>
var linScale=d3.scale.linear().domain([0,1]).range([0,500]);
var xAxis = d3.svg.axis().scale(linScale);
var svg = d3.select('body').append('svg').attr("width", 300).attr("height", 500);
//axis on the top of the screen
svg.append("g").attr("class","xAxis").call(xAxis);
//translate axis
svg.append("g")..attr("class","xAxis").attr("transform", "translate(0,100)").call(xAxis);
          </code></pre>

                  </section>

                  <section>
                  <h2>Tuto5 : creating a bar chart (3)</h2>
                  <p>Add a left axis :</p>

                  <img src="images/barchart3.png" style="border:0" height=500px/> 
                  </section>
                  </section>

                  <section>
                  <section>
                  <h1>6. Interaction</h1>
                  </section>

                  <section>
                  <h2>Tuto6 : creating a bar chart (4)</h2>
                  <p>Add some interaction to the bar chart.</p>
                  <img src="images/barchart4.png" style="border:0" height=500px/> 

                  </section>

                  </section>

                  <section>
                  <h2>Tuto 7 : creating a bubble chart</h2>

                  <p>
                  Create a bubble chart for all the cities in France with : 
                  <ul>
                    <li>The population in 2010 as xAxis</li>
                    <li>The surface as yAxis</li>
                  </ul>
                  </p>
                  </section>

                  <section>
                  <h2>Tuto 8 : introduction to dc.js</h2>
                  Use dc.js to illustrate the following in France : 
                  <img src="images/sea_level.png" style="border:0"/>

                  </section>

                  <script src="lib/revealjs/lib/js/head.min.js"></script>
                  <script src="lib/revealjs/js/reveal.min.js"></script>

                  <script>

                    Reveal.initialize({
                      controls: true,
                      progress: true,
                      history: true,
                      center: true,
                      loop: true,
                      theme: Reveal.getQueryHash().theme,
                      transition: 'linear',
                      margin: 0,

                      dependencies: [
                      { src: 'lib/revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                      { src: 'lib/revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                      { src: 'lib/revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                      { src: 'lib/revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                      { src: 'lib/revealjs/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                      { src: 'lib/revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                      ]
                    });
                  </script>

                </body>
              </html>
